<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="traffic">
    <!-- <Parallel failure_count="1"
              success_count="1">
      <Fallback>
        <PedestrianRequest/>
        <TriggerLight state="RED"
                      current_state="{current_state}"/>
        <Sleep msec="1000"/>
      </Fallback>
      <Sequence>
        <TriggerLight state="GREEN"
                      current_state="{current_state}"/>
        <Sleep msec="5000"/>
        <TriggerLight state="YELLOW"
                      current_state="{current_state}"/>
        <Sleep msec="2000"/>
        <TriggerLight state="RED"
                      current_state="{current_state}"/>
        <Sleep msec="5000"/>
      </Sequence>
    </Parallel> -->

    <ReactiveSequence>
        <PedestrianRequest/>
        <ForceSuccess>
          <Sequence>
            <TriggerLight state="RED"
                          current_state="{current_state}"/>
            <Sleep msec="1000"/>
          </Sequence>
        </ForceSuccess>
      </ReactiveSequence>
    <!-- <Sequence>
        <TriggerLight state="GREEN"
                      current_state="{current_state}"/>
        <Sleep msec="5000"/>
        <TriggerLight state="YELLOW"
                      current_state="{current_state}"/>
        <Sleep msec="2000"/>
        <TriggerLight state="RED"
                      current_state="{current_state}"/>
        <Sleep msec="5000"/>
    </Sequence> -->
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Condition ID="PedestrianRequest"
               editable="true"/>
    <Action ID="TriggerLight"
            editable="true">
      <input_port name="state">desired color</input_port>
      <inout_port name="current_state">current color</inout_port>
    </Action>
  </TreeNodesModel>

</root>
